<mvc:View
    controllerName="ordermanager.controller.SalesOrderSet"
    xmlns:mvc="sap.ui.core.mvc"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:core="sap.ui.core"
>
    <Page id="page" title="{i18n>title}">
        <content />
        <Panel>
            <FlexBox
                height="100px"
                alignItems="Center"
                justifyContent="Center">
                <Text text="Search by:  " />
                <Select
                    forceSelection="true"
                    class="sapUiSmallMarginBeginEnd"
                >
                    <core:Item text="Sale Order Number" />
                    <core:Item text="Customer" />
                    <core:Item text="Product" />
                </Select>
                <Input
                    id="specification_id"
                    liveChange=".searchTyping"
                />
                <Button
                    text="apply"
                    icon="sap-icon://search"
                    type="Emphasized"
                    class="sapUiSmallMarginBegin" />
                <Button
                    text="reset table"
                    icon="sap-icon://reset"
                    type="Transparent"
                    class="sapUiSmallMarginBegin" />
            </FlexBox>
        </Panel>
        <l:VerticalLayout
            width="100%">
            <l:content>
                <Table id="tbSalesOrderSet"
                    showNoData="false"
                    growing="true"
                    growingThreshold="25"
                    growingScrollToLoad="true"
                    sticky="HeaderToolbar,InfoToolbar,ColumnHeaders"
                    items="{ path: 'customSalesOrderSet>/SalesOrderSet', sorter: { path: 'BillingStatus', descending: true, group: '.getGroup' }, groupHeaderFactory: '.getGroupHeader'}"
                >
                    <columns>
                        <Column id="product" width="12em" headerMenu="columnHeaderMenu">
                            <Text text="SalesOrderID" />
                        </Column>
                        <Column minScreenWidth="Tablet" demandPopin="true">
                            <Text text="Customer" />
                        </Column>
                        <Column width="8em" minScreenWidth="Tablet" demandPopin="true" hAlign="End">
                            <Text text="GrossAmount" />
                        </Column>
                        <Column width="8em" minScreenWidth="Tablet" demandPopin="true"
                            hAlign="End">
                            <Text text="NetAmount" />
                        </Column>
                        <!-- add more -->
                        <Column width="8em" minScreenWidth="Tablet" demandPopin="true"
                            hAlign="End">
                            <Text text="TaxAmount" />
                        </Column>
                        <Column width="8em" minScreenWidth="Tablet" demandPopin="true"
                            hAlign="Center">
                            <Text text="BillingStatus" />
                        </Column>
                        <!-- add more -->
                        <Column width="8em" hAlign="Center">
                            <Text text="DeliveryStatus" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem press=".onPressSalesOrderLineItemSet(${SalesOrderID})"
                            type="Navigation"
                            vAlign="Middle">
                            <cells>
                                <ObjectIdentifier title="{customSalesOrderSet>SalesOrderID}" />
                                <Text
                                    text="{customSalesOrderSet>CustomerID} - {customSalesOrderSet>CustomerName}" />
                                <ObjectNumber number="{customSalesOrderSet>GrossAmount}" />
                                <ObjectNumber number="{customSalesOrderSet>NetAmount}" />
                                <ObjectNumber number="{customSalesOrderSet>TaxAmount}" />
                                <Button
                                    text="{customSalesOrderSet>BillingStatus}"
                                    width="50px"
                                    type="{= ${customSalesOrderSet>BillingStatus} === 'P' ? 'Attention' : 'Reject' }"
                                    tooltip="{= ${customSalesOrderSet>BillingStatus} === 'P' ? 'Pending' : 'Orther' }"
                                    id="myButton"
                                />
                                <Button
                                    text="{customSalesOrderSet>DeliveryStatus}"
                                    type="{= ${customSalesOrderSet>DeliveryStatus} === 'D' ? 'Accept' : 'Attention' }"
                                    tooltip="{= ${customSalesOrderSet>DeliveryStatus} === 'D' ? 'Delivered' : 'Initial' }"
                                    width="50px"
                                />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </l:content>
        </l:VerticalLayout>


        <Panel visible="{customSalesOrderSet>/isShowLoadMoreBtn}">
            <FlexBox
                height="100px"
                alignItems="Center"
                justifyContent="Center"
                visible="{customSalesOrderSet>/loadMoreIndicator}"
            >
                <BusyIndicator size="2em" />
            </FlexBox>
            <FlexBox
                height="100px"
                alignItems="Center"
                justifyContent="Center">
                <Button
                    text="Load more"
                    icon="sap-icon://add"
                    type="Emphasized"
                    press=".onPressLoadMoreBtn"
                    enabled="{!customSalesOrderSet>/loadMoreIndicator}"
                />
                <Select
                    forceSelection="true"
                    class="sapUiSmallMarginBeginEnd"
                    change=".onChangeLoadMoreItem"
                >
                    <core:Item text="{config>/SCREEN/SALES_ORDER_SET/PAGINATION_TOP_DEFAULT}" />
                    <core:Item text="200" />
                    <core:Item text="800" />
                    <core:Item text="3000" />
                    <core:Item text="5000" />
                </Select>
                <Text text="lines" />
            </FlexBox>
        </Panel>
    </Page>
</mvc:View>